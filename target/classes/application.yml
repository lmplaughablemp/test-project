server:
  port: 8080

spring:
  application:
    name: bank-cards-api

  # Настройки MySQL
  datasource:
    url: jdbc:mysql://localhost:3306/bank_cards_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&characterEncoding=UTF-8
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000

  # Настройки JPA
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  # Настройки Liquibase
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.yaml
    enabled: true
    drop-first: false

# Настройки приложения
app:
  encryption:
    key: "0123456789abcdef0123456789abcdef" # 32 символа для AES-256
  security:
    jwt:
      secret: "mySuperSecretKeyForBankCardsApplication2024WithSpringBoot3AndJWT"
      expiration: 86400000  # 24 часа в миллисекундах
      refresh-expiration: 604800000  # 7 дней в миллисекундах
    cors:
      allowed-origins: "http://localhost:8080,http://localhost:3000"

# SpringDoc OpenAPI конфигурация
springdoc:
  api-docs:
    path: /v3/api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operationsSorter: method
    tagsSorter: alpha
    display-request-duration: true
    persistAuthorization: true
    disable-swagger-default-url: true
    doc-expansion: none
    try-it-out-enabled: true
    filter: true
  packages-to-scan: com.example.bankcards
  paths-to-match: /api/**

# Логгирование
logging:
  level:
    # Spring Security
    org.springframework.security: DEBUG
    org.springframework.security.web: DEBUG
    org.springframework.security.web.authentication: TRACE

    # Web и фильтры
    org.springframework.web: DEBUG
    org.springframework.web.filter: DEBUG

    # Приложение
    com.example.bankcards: DEBUG
    com.example.bankcards.security: TRACE
    com.example.bankcards.security.JwtAuthenticationFilter: TRACE
    com.example.bankcards.security.JwtService: DEBUG

    # База данных
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

    # Swagger
    org.springdoc: INFO

    # Jackson отладка сериализации
    com.fasterxml.jackson.databind: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"